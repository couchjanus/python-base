#:kivy 1.11.1
#:import Factory kivy.factory.Factory

<Screen>:
    canvas:
        Color:
            rgb: .2, .2, .2
        Rectangle:
            size: self.size

<MutableLabelTextInput@MutableTextInput>:
    Label:
        id: w_label
        pos: root.pos
        text: root.text

    TextInput:
        id: w_textinput
        pos: root.pos
        text: root.text
        multiline: root.multiline

<ProjectView>:

    on_project_description: app.set_project_description(self.project_index, self.project_description)
    on_project_title: app.set_project_title(self.project_index, self.project_title)
    on_project_deadline: app.set_project_deadline(self.project_index, self.project_deadline)

    BoxLayout:

        orientation: 'vertical'

        BoxLayout:

            orientation: 'horizontal'
            size_hint_y: None
            height: '48dp'
            padding: '5dp'

            canvas:
                Color:
                    rgb: .3, .3, .3
                Rectangle:
                    pos: self.pos
                    size: self.size

            Button:
                text: '<'
                size_hint_x: None
                width: self.height
                on_release: app.go_projects()

            MutableLabelTextInput:
                text: root.project_title
                font_size: '16sp'
                multiline: False
                on_text: root.project_title = self.text

            Button:
                text: 'X'
                size_hint_x: None
                width: self.height
                on_release: app.del_project(root.project_index)

        MutableLabelTextInput:
            text: root.project_description
            font_size: '16sp'
            multiline: True
            on_text: root.project_description = self.text

        MutableLabelTextInput:
            text: root.project_deadline
            font_size: '16sp'
            multiline: False
            on_text: root.project_deadline = self.text


<ProjectListItem>:

    height: '48sp'
    size_hint_y: None

    canvas:
        Color:
            rgb: .3, .3, .3
        Rectangle:
            pos: self.pos
            size: self.width, 1

    BoxLayout:

        padding: '5dp'

        Label:
            text: root.project_title

        Button:
            text: '>'
            size_hint_x: None
            width: self.height
            on_release: app.edit_project(root.project_index)

<Projects>:

    BoxLayout:

        orientation: 'vertical'

        BoxLayout:

            orientation: 'horizontal'
            size_hint_y: None
            height: '48dp'
            padding: '5dp'

            canvas:
                Color:
                    rgb: .3, .3, .3
                Rectangle:
                    pos: self.pos
                    size: self.size

            Image:
                source: 'data/icon.png'
                mipmap: True
                size_hint_x: None
                width: self.height

            Label:
                text: 'Projects'
                font_size: '16sp'

            Button:
                text: '+'
                size_hint_x: None
                width: self.height
                on_release: app.add_project()

        RecycleView:
            data: root.data_for_widgets
            viewclass: 'ProjectListItem'
            RecycleBoxLayout:
                default_size: None, dp(56)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'
                spacing: dp(2)
